version: 2
updates:
  # Root npm - Monorepo tooling (Turbo, Lefthook)
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
      time: "09:00"
      timezone: "Asia/Tokyo"
    open-pull-requests-limit: 3
    labels:
      - "dependencies"
      - "javascript"
      - "monorepo-tools"
    commit-message:
      prefix: "chore"
      prefix-development: "chore"
      include: "scope"
    versioning-strategy: increase
    groups:
      monorepo-tooling:
        patterns:
          - "turbo"
          - "lefthook"

  # Frontend npm - Next.js app
  - package-ecosystem: "npm"
    directory: "/apps/web"
    schedule:
      interval: "daily"
      time: "09:00"
      timezone: "Asia/Tokyo"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "javascript"
      - "frontend"
    commit-message:
      prefix: "chore"
      prefix-development: "chore"
      include: "scope"
    versioning-strategy: increase
    groups:
      react-ecosystem:
        patterns:
          - "next"
          - "react"
          - "react-dom"
          - "@types/react"
          - "@types/react-dom"
      radix-ui:
        patterns:
          - "@radix-ui/*"
      tailwind-css:
        patterns:
          - "tailwindcss"
          - "@tailwindcss/*"
          - "tw-animate-css"
      data-fetching:
        patterns:
          - "@tanstack/react-query"
          - "axios"
      dev-tools:
        patterns:
          - "@biomejs/biome"
          - "orval"
          - "typescript"
          - "babel-plugin-react-compiler"

  # Go modules - Backend API
  - package-ecosystem: "gomod"
    directory: "/apps/api"
    schedule:
      interval: "daily"
      time: "09:00"
      timezone: "Asia/Tokyo"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "go"
      - "backend"
    commit-message:
      prefix: "chore"
      prefix-development: "chore"
      include: "scope"
    groups:
      database:
        patterns:
          - "github.com/jackc/pgx*"
          - "github.com/jackc/puddle*"
      http-framework:
        patterns:
          - "github.com/labstack/echo*"
          - "github.com/labstack/gommon*"
      redis-session:
        patterns:
          - "github.com/redis/go-redis*"
          - "github.com/rbcervilla/redisstore*"
          - "github.com/gorilla/sessions"
      openapi-toolchain:
        patterns:
          - "github.com/oapi-codegen/*"
          - "github.com/getkin/kin-openapi*"
      testing:
        patterns:
          - "github.com/stretchr/testify*"
          - "github.com/stretchr/objx*"

  # Docker - docker-compose.yml
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "daily"
      time: "09:00"
      timezone: "Asia/Tokyo"
    open-pull-requests-limit: 3
    labels:
      - "dependencies"
      - "docker"
      - "infrastructure"
    commit-message:
      prefix: "chore"
      prefix-development: "chore"
      include: "scope"

  # Docker - apps/api/Dockerfile
  - package-ecosystem: "docker"
    directory: "/apps/api"
    schedule:
      interval: "daily"
      time: "09:00"
      timezone: "Asia/Tokyo"
    open-pull-requests-limit: 3
    labels:
      - "dependencies"
      - "docker"
      - "backend"
    commit-message:
      prefix: "chore"
      prefix-development: "chore"
      include: "scope"

  # GitHub Actions
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "daily"
      time: "09:00"
      timezone: "Asia/Tokyo"
    open-pull-requests-limit: 3
    labels:
      - "dependencies"
      - "github-actions"
      - "ci-cd"
    commit-message:
      prefix: "chore"
      prefix-development: "chore"
      include: "scope"
    groups:
      github-actions-core:
        patterns:
          - "actions/*"
